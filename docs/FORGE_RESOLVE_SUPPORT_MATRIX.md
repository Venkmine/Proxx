# Forge Resolve Support Matrix

**Evidence-Based Format Support for DaVinci Resolve Integration**

This document is generated from test evidence, not speculation. All support claims are backed by test reports in `forge-tests/reports/`.

---

## Support Legend

- ✅ **Allowed**: Format is fully supported and tested
- ⚠️ **Warn**: Format may work but has limitations or edge cases
- ❌ **Block**: Format is not supported and will be rejected

---

## RAW Format Support Matrix

| Format | Resolve Free | Resolve Studio | Notes |
|--------|--------------|----------------|-------|
| **BRAW** (Blackmagic RAW) | ✅ | ✅ | Native support in both editions |
| **R3D** (RED RAW) | ⚠️ | ✅ | Free has limited debayer options; Studio has full support |
| **ARRIRAW** (ARRI RAW) | ✅ | ✅ | Supported in both editions |
| **X-OCN** (Sony RAW) | ⚠️ | ✅ | Check Free edition limitations |
| **Canon RAW** | ⚠️ | ✅ | Cinema RAW Light support |
| **ProRes RAW** | ❌ | ❌ | **NOT SUPPORTED** - Neither Free nor Studio can decode ProRes RAW |

---

## Standard Format Support Matrix

| Format | Resolve Free | Resolve Studio | Engine | Notes |
|--------|--------------|----------------|--------|-------|
| **H.264** | ✅ | ✅ | FFmpeg | Standard format |
| **H.265/HEVC** | ✅ | ✅ | FFmpeg | Standard format |
| **ProRes** (422/HQ/4444) | ✅ | ✅ | FFmpeg | Standard ProRes, NOT ProRes RAW |
| **DNxHD/DNxHR** | ✅ | ✅ | FFmpeg | Avid codecs |
| **XAVC** | ⚠️ | ✅ | FFmpeg | Sony professional format |

---

## Critical Notes

### ProRes RAW is NOT ProRes

**IMPORTANT**: ProRes RAW is a **completely different format** from standard ProRes:

- **Standard ProRes** (422, LT, HQ, 4444, 4444 XQ): ✅ Fully supported by Resolve and FFmpeg
- **ProRes RAW**: ❌ **NOT supported** by DaVinci Resolve (Free or Studio)

ProRes RAW is Apple's sensor RAW format that can **only** be decoded by Final Cut Pro. To use ProRes RAW files in Resolve, you must:

1. Open the ProRes RAW file in Final Cut Pro
2. Export to standard ProRes (422/HQ/4444)
3. Then process with Forge/Resolve

### Resolve Edition Differences

**DaVinci Resolve Free vs Studio:**

- **Free**: Full support for most RAW formats, but may have limitations on:
  - Advanced color science options
  - GPU acceleration for certain codecs
  - Noise reduction quality

- **Studio**: Full professional feature set including:
  - Advanced debayering options for RED, ARRI
  - GPU acceleration for all supported codecs
  - Collaboration features

**For proxy generation**: Both editions work, but Studio may be faster for high-resolution RAW formats.

---

## Evidence Sources

This support matrix is derived from test reports generated by `forge-tests/run_tests.py`:

**Latest Test Reports:**
- Free Edition: `forge-tests/reports/test_report_free_*.json`
- Studio Edition: `forge-tests/reports/test_report_studio_*.json`

To regenerate this matrix with current evidence:

```bash
# Run tests for your Resolve edition
python forge-tests/run_tests.py --config forge-tests/config/test_matrix_free.json

# Or for Studio
python forge-tests/run_tests.py --config forge-tests/config/test_matrix_studio.json
```

---

## Runtime Support Guardrails

Forge enforces support policies at runtime using `backend/v2/support_policy.py`:

- **Blocked formats**: Job creation fails immediately with clear error message
- **Warned formats**: Job proceeds but attaches warning in metadata
- **Allowed formats**: Normal processing

### Checking Format Support Programmatically

```python
from backend.v2.support_policy import check_format_support

result = check_format_support("ProRes RAW")

if result.is_blocked:
    print(f"Blocked: {result.message}")
elif result.policy == "warn":
    print(f"Warning: {result.message}")
else:
    print(f"Allowed: {result.message}")
```

---

## Updating the Support Matrix

**DO NOT hand-edit this matrix.** To update:

1. Run tests with sample media for the format in question
2. Review the generated test report
3. Update this document based on report evidence
4. Commit both the report and the updated matrix

**Principle**: No format is "supported" until there's test evidence proving it works.

---

## Questions?

See:
- `forge-tests/README.md` for test runner documentation
- `backend/v2/support_policy.py` for runtime policy enforcement
- `backend/v2/source_capabilities.py` for format capability definitions
