# Forge Resolve Support Matrix

**Evidence-Based Format Support for DaVinci Resolve Integration**

This document is generated from test evidence, not speculation. All support claims are backed by test reports in `forge-tests/reports/`.

---

## Support Legend

- ✅ **Allowed**: Format is fully supported and tested
- ⚠️ **Warn**: Format may work but has limitations or edge cases
- ❌ **Block**: Format is not supported and will be rejected

---

## RAW Format Support Matrix

| Format | Resolve Free | Resolve Studio | Test Evidence | Notes |
|--------|--------------|----------------|---------------|-------|
| **BRAW** (Blackmagic RAW) | ✅ | ✅ | `test_report_studio_20251230_212542.json` | Native support, verified 405MB output |
| **R3D** (RED RAW) | ⚠️ | ✅ | `test_report_studio_20251230_212542.json` | Studio verified (500MB output); Free has limited debayer |
| **ARRIRAW** (ARRI RAW) | ⚠️ | ✅ | `test_report_studio_20251230_212542.json` | **Requires Resolve 20.3.1+** for ARRICORE; verified 1.4GB output |
| **X-OCN** (Sony RAW) | ⚠️ | ✅ | `test_report_studio_20251230_212542.json` | Venice 2 verified (3.9GB output); Free untested |
| **Canon RAW** | ⚠️ | ⚠️ | *No test evidence* | Cinema RAW Light - untested |
| **ProRes RAW** | ❌ | ❌ | *Policy block* | **NOT SUPPORTED** - Neither edition can decode ProRes RAW |

---

## Standard Format Support Matrix

| Format | Resolve Free | Resolve Studio | Engine | Test Evidence | Notes |
|--------|--------------|----------------|--------|---------------|-------|
| **H.264** | ✅ | ✅ | FFmpeg | *FFmpeg tested* | Standard format |
| **H.265/HEVC** | ✅ | ✅ | FFmpeg | *FFmpeg tested* | Standard format |
| **ProRes** (422/HQ/4444) | ✅ | ✅ | FFmpeg | *FFmpeg tested* | Standard ProRes, NOT ProRes RAW |
| **DNxHD/DNxHR** | ✅ | ✅ | FFmpeg | *FFmpeg tested* | Avid codecs |
| **XAVC** (Sony) | ⚠️ | ✅ | Resolve | `test_report_studio_20251230_212542.json` | Burano verified (1.5GB output); Free untested |

---

## Critical Notes

### ProRes RAW is NOT ProRes

**IMPORTANT**: ProRes RAW is a **completely different format** from standard ProRes:

- **Standard ProRes** (422, LT, HQ, 4444, 4444 XQ): ✅ Fully supported by Resolve and FFmpeg
- **ProRes RAW**: ❌ **NOT supported** by DaVinci Resolve (Free or Studio)

ProRes RAW is Apple's sensor RAW format that can **only** be decoded by Final Cut Pro. To use ProRes RAW files in Resolve, you must:

1. Open the ProRes RAW file in Final Cut Pro
2. Export to standard ProRes (422/HQ/4444)
3. Then process with Forge/Resolve

### Resolve Edition Differences

**DaVinci Resolve Free vs Studio:**

- **Free**: Full support for most RAW formats, but may have limitations on:
  - Advanced color science options
  - GPU acceleration for certain codecs
  - Noise reduction quality

- **Studio**: Full professional feature set including:
  - Advanced debayering options for RED, ARRI
  - GPU acceleration for all supported codecs
  - Collaboration features

**For proxy generation**: Both editions work, but Studio may be faster for high-resolution RAW formats.

---

## Version Compatibility Matrix

**ARRIRAW (ARRI RAW) Version Requirements:**

| Resolve Version | ARRIRAW Support | Test Evidence |
|-----------------|-----------------|---------------|
| 20.0.1 | ❌ Not Supported | ARRICORE import fails |
| 20.3.1 | ✅ Fully Supported | ARRICORE verified (1.4GB output) |

**Recommendation:** Use DaVinci Resolve **20.3.1 or later** for ARRIRAW/ARRICORE support.

All other tested formats (BRAW, R3D, X-OCN, XAVC) are supported in both 20.0.1 and 20.3.1.

---

## Evidence Sources

This support matrix is derived from test reports generated by `forge-tests/run_tests.py`:

**Latest Test Run: 2025-12-30 (21:25 UTC)**

| Test ID | Format | Status | Output Size | Edition | Version |
|---------|--------|--------|-------------|---------|---------|
| `braw_sample` | BRAW | ✅ PASSED | 405 MB | Studio | 20.3.1 |
| `r3d_sample` | R3D | ✅ PASSED | 500 MB | Studio | 20.3.1 |
| `arriraw_sample` | ARRIRAW | ✅ PASSED | 1.4 GB | Studio | 20.3.1 |
| `xocn_sample` | X-OCN | ✅ PASSED | 3.9 GB | Studio | 20.3.1 |
| `xavc_sample` | XAVC | ✅ PASSED | 1.5 GB | Studio | 20.3.1 |
| `prores_raw_sample` | ProRes RAW | ⏭️ SKIPPED | - | (blocked) | - |

**Resolve Version Tested:** 20.3.1 (Studio)

**Critical Version Dependency:**
- **ARRICORE** (ARRI RAW): Requires Resolve **20.3.1 or later**
  - ❌ Not supported in Resolve 20.0.1
  - ✅ Verified working in Resolve 20.3.1

**Test Reports:**
- `forge-tests/reports/test_report_studio_20251230_212542.json` (primary evidence - Resolve 20.3.1)
- `forge-tests/reports/test_report_studio_20251230_204519.json` (Resolve 20.0.1 - ARRIRAW failed)

To regenerate this matrix with current evidence:

```bash
# Run tests for your Resolve edition
python forge-tests/run_tests.py --config forge-tests/config/test_matrix_free.json

# Or for Studio
python forge-tests/run_tests.py --config forge-tests/config/test_matrix_studio.json
```

---

## Runtime Support Guardrails

Forge enforces support policies at runtime using `backend/v2/support_policy.py`:

- **Blocked formats**: Job creation fails immediately with clear error message
- **Warned formats**: Job proceeds but attaches warning in metadata
- **Allowed formats**: Normal processing

### Checking Format Support Programmatically

```python
from backend.v2.support_policy import check_format_support

result = check_format_support("ProRes RAW")

if result.is_blocked:
    print(f"Blocked: {result.message}")
elif result.policy == "warn":
    print(f"Warning: {result.message}")
else:
    print(f"Allowed: {result.message}")
```

---

## Updating the Support Matrix

**DO NOT hand-edit this matrix.** To update:

1. Run tests with sample media for the format in question
2. Review the generated test report
3. Update this document based on report evidence
4. Commit both the report and the updated matrix

**Principle**: No format is "supported" until there's test evidence proving it works.

---

## Questions?

See:
- `forge-tests/README.md` for test runner documentation
- `backend/v2/support_policy.py` for runtime policy enforcement
- `backend/v2/source_capabilities.py` for format capability definitions
